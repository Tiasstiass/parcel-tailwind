
{%- for block in section.blocks -%}
  {%- style -%}
    .icon-block__{{ block.id }} {
      background-color: {{ block.settings.bg_color }};
      {%- if block.settings.bg_image != blank -%}
        background-image: url({{ block.settings.bg_image | image_url: width: 100, height: 100 }});
      {%- endif -%}
    }
    .icon-block__{{ block.id }} .icon-block__title {
      color: {{ section.settings.font_color }};
    }
    .icon-block__{{ block.id }} .icon-block__image img {
      max-width: {{ block.settings.max_width }}%;
    }
  {%- endstyle -%}

  <div class="icon-block__{{ block.id }} icon-block__container text-center">
    {%- if block.settings.link != blank -%}<a href="{{ block.settings.link }}">{%- endif -%}
    <div class="icon-block__image flex justify-center items-center">
      {%- if block.settings.image != blank -%}
        {%- render 'image', image: block.settings.image -%}
      {%- endif -%}
    </div>
    <div class="icon-block__title">
      {%- if block.settings.text_title != blank -%}
        {{ block.settings.text_title }}
      {%- endif -%}
    </div>
    {%- if block.settings.link != blank -%}</a>{%- endif -%}
  </div>
{%- endfor -%}